{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["'use strict';\n\n/**\n * Created by Joey on 3/1/2016.\n */\n//require('dotenv').config();\nrequire('babel-core/register');\nvar express = require('express');\nvar exphbs = require('express-handlebars');\nvar path = require('path');\nvar app = express();\nvar bodyparser = require('body-parser');\nvar passport = require('passport');\nvar SteamStrategy = require('passport-steam').Strategy;\nvar session = require('express-session');\nrequire('babel-core/register');\n\n//Set up body parser for post requests\napp.use(bodyparser.urlencoded({ extended: false }));\n\n// parse application/json\napp.use(bodyparser.json());\n\n//Set up our express-session middleware\napp.use(session({\n    secret: 'test',\n    name: 'steamSession',\n    resave: true,\n    saveUninitialized: true }));\n\n//Passport middleware\napp.use(passport.initialize());\napp.use(passport.session());\n\n//Set up our strategies, starting with steam strategy\npassport.use(new SteamStrategy({\n    //TODO: CHANGE TO REAL URL ON DEPLOY\n    returnURL: process.env.HOME_URL + '/auth/steam/return',\n    //returnURL: 'http://localhost:5000/auth/steam/return',\n    realm: process.env.HOME_URL,\n    //realm: 'http://localhost:5000',\n    apiKey: process.env.STEAM_API_KEY\n}, function (identifier, profile, done) {\n    process.nextTick(function () {\n\n        //Set the profile identifier to the full URL identifier\n        profile.identifier = identifier;\n        return done(null, profile);\n    });\n}));\n\npassport.serializeUser(function (user, done) {\n    done(null, user);\n});\n\npassport.deserializeUser(function (user, done) {\n    done(null, user);\n});\n\n//Public Static Resources\napp.use(express.static(path.join(__dirname, '../client/views')));\napp.use(express.static(path.join(__dirname, '../client/builds')));\napp.use(express.static(path.join(__dirname, '../client/Style')));\n\n//Set up handlebars view engine\napp.set('views', path.join(__dirname, '/WebView'));\napp.engine('hbs', exphbs({ defaultLayout: 'main',\n    extname: '.hbs',\n    layoutsDir: path.join(__dirname, '/WebView/layouts')\n}));\napp.set('view engine', 'hbs');\n\nrequire('./route').default(app);\n\n//Root request hanlder\napp.get('/', function (req, res) {\n    //If the user is signed in render the app's main template\n    if (req.isAuthenticated()) {\n        res.render('index', {\n            userName: req.user.displayName\n        });\n    } else {\n        //If the user is not signed in send them the welcome page\n        res.render('welcomepage');\n    }\n});\n\napp.get('/auth/steam', passport.authenticate('steam'), function (req, res) {\n    //This will not be called\n    res.redirect('/');\n});\n\napp.get('/auth/steam/return', passport.authenticate('steam', { failureRedirect: '/login' }), function (req, res) {\n    // Successful authentication, redirect home.\n    res.redirect('/');\n});\n\napp.get('/logout', function (req, res) {\n    //When the user logs out destroy the session and log them out\n    req.logout();\n    req.session.destroy(function () {});\n\n    //Redirect them home\n    res.redirect('/');\n});\n\napp.listen(process.env.PORT || 5000);"]}