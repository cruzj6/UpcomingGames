{"version":3,"sources":["steamauth.js"],"names":[],"mappings":";;;;;QAOgB;;;;AAJhB,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,gBAAgB,QAAQ,gBAAR,EAA0B,QAA1B;AACpB,IAAI,UAAU,QAAQ,iBAAR,CAAV;;AAEG,SAAS,KAAT,GACP;;AAEI,aAAS,GAAT,CAAa,IAAI,aAAJ,CAAkB;;AAE3B,mBAAW,QAAQ,GAAR,CAAY,QAAZ,GAAuB,oBAAvB;;AAEX,eAAO,QAAQ,GAAR,CAAY,QAAZ;;AAEP,gBAAQ,QAAQ,GAAR,CAAY,aAAZ;KANC,EAOV,UAAU,UAAV,EAAsB,OAAtB,EAA+B,IAA/B,EAAqC;AACpC,gBAAQ,QAAR,CAAiB,YAAY;;;AAGzB,oBAAQ,UAAR,GAAqB,UAArB,CAHyB;AAIzB,mBAAO,KAAK,IAAL,EAAW,OAAX,CAAP,CAJyB;SAAZ,CAAjB,CADoC;KAArC,CAPH,EAFJ;CADO;;AAoBP,OAAO,GAAP,CAAW,GAAX,EAAgB,SAAS,YAAT,CAAsB,OAAtB,CAAhB,EAAgD,UAAU,GAAV,EAAe,GAAf,EAAoB;;AAEhE,QAAI,QAAJ,CAAa,GAAb,EAFgE;CAApB,CAAhD;;AAKA,OAAO,GAAP,CAAW,SAAX,EAAsB,SAAS,YAAT,CAAsB,OAAtB,EAA+B,EAAE,iBAAiB,QAAjB,EAAjC,CAAtB,EAAqF,UAAU,GAAV,EAAe,GAAf,EAAoB;;AAErG,QAAI,QAAJ,CAAa,GAAb,EAFqG;CAApB,CAArF;;AAKA,OAAO,GAAP,CAAW,SAAX,EAAsB,UAAU,GAAV,EAAe,GAAf,EAAoB;;AAEtC,QAAI,MAAJ,GAFsC;AAGtC,QAAI,OAAJ,CAAY,OAAZ,CAAoB,YAAY,EAAZ,CAApB;;;AAHsC,OAMtC,CAAI,QAAJ,CAAa,GAAb,EANsC;CAApB,CAAtB;;AASA,SAAS,aAAT,CAAuB,UAAU,IAAV,EAAgB,IAAhB,EAAsB;AACzC,SAAK,IAAL,EAAW,IAAX,EADyC;CAAtB,CAAvB;;AAIA,SAAS,eAAT,CAAyB,UAAU,IAAV,EAAgB,IAAhB,EAAsB;AAC3C,SAAK,IAAL,EAAW,IAAX,EAD2C;CAAtB,CAAzB","file":"steamauth-compiled.js","sourcesContent":["/**\n * Created by Joey on 4/4/16.\n */\nvar passport = require('passport');\nvar SteamStrategy = require('passport-steam').Strategy;\nvar session = require('express-session');\n\nexport function setUp()\n{\n    //Set up our strategies, starting with steam strategy\n    passport.use(new SteamStrategy({\n        //TODO: CHANGE TO REAL URL ON DEPLOY\n        returnURL: process.env.HOME_URL + '/auth/steam/return',\n        //returnURL: 'http://localhost:5000/auth/steam/return',\n        realm: process.env.HOME_URL,\n        //realm: 'http://localhost:5000',\n        apiKey: process.env.STEAM_API_KEY\n    }, function (identifier, profile, done) {\n        process.nextTick(function () {\n\n            //Set the profile identifier to the full URL identifier\n            profile.identifier = identifier;\n            return done(null, profile);\n        });\n    }));\n}\n\nrouter.get('/', passport.authenticate('steam'), function (req, res) {\n    //This will not be called\n    res.redirect('/');\n});\n\nrouter.get('/return', passport.authenticate('steam', { failureRedirect: '/login' }), function (req, res) {\n    // Successful authentication, redirect home.\n    res.redirect('/');\n});\n\nrouter.get('/logout', function (req, res) {\n    //When the user logs out destroy the session and log them out\n    req.logout();\n    req.session.destroy(function () {});\n\n    //Redirect them home\n    res.redirect('/');\n});\n\npassport.serializeUser(function (user, done) {\n    done(null, user);\n});\n\npassport.deserializeUser(function (user, done) {\n    done(null, user);\n});"]}