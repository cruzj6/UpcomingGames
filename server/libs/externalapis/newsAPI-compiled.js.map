{"version":3,"sources":["newsAPI.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,SAAS,QAAQ,GAAR,CAAY,QAAZ;AACb,IAAI,UAAU,8CAAV;AACJ,IAAI,OAAO,IAAI,MAAJ,CAAW,CAAE,MAAF,EAAU,MAAV,EAAmB,IAAnB,CAAwB,GAAxB,CAAX,EAAyC,QAAzC,CAAkD,QAAlD,CAAP;AACJ,IAAI,UAAU,QAAQ,SAAR,EAAmB,QAAnB,CAA4B;AACtC,aAAQ;AACJ,yBAAkB,WAAW,IAAX;KADtB;CADU,CAAV;;;;AAQJ,OAAO,OAAP,GAAiB;AACb,iBAAa,qBAAS,QAAT,EAAmB,QAAnB,EAA6B;AACtC,qBAAY,QAAZ,EAAsB,QAAtB,EADsC;KAA7B;AAGb,kBAAc,sBAAS,QAAT,EAAmB,gBAAnB,EACd;AACI,sBAAa,QAAb,EAAuB,gBAAvB,EADJ;KADc;;CAJlB;;;AAYA,SAAS,aAAT,CAAsB,QAAtB,EAAgC,gBAAhC,EACA;;AAEI,QAAI,eAAe,UAAU,QAAV;;;AAFvB,WAKI,CAAQ,GAAR,CAAY;AACR,aAAK,YAAL;AACA,YAAG;AACC,qBAAQ,MAAR;AACA,mBAAO,MAAM,QAAN,GAAiB,GAAjB;SAFX;KAFJ,EAMG,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EACH;;AAEI,YAAI,eAAe,EAAf,CAFR;AAGI,YAAI,UAAU,KAAK,KAAL,CAAW,IAAX,CAAV,CAHR;AAII,YAAI,UAAU,QAAQ,CAAR,CAAU,OAAV;;;AAJlB,aAOQ,IAAI,IAAI,CAAJ,EAAO,IAAI,QAAQ,MAAR,EAAgB,GAAnC,EACA;AACI,gBAAI,SAAS,QAAQ,CAAR,CAAT,CADR;AAEI,yBAAa,IAAb,CAAkB;AACd,uBAAO,OAAO,KAAP;AACP,qBAAK,OAAO,QAAP;AACL,2BAAW,OAAO,SAAP;aAHf,EAFJ;SADA;;;AAPJ,wBAkBI,CAAiB,YAAjB,EAlBJ;KADG,CANH,CALJ;CADA;;;AAoCA,SAAS,YAAT,CAAqB,QAArB,EAA+B,QAA/B,EACA;;AAEI,QAAI,eAAe,UAAU,OAAV,CAFvB;AAGI,YAAQ,GAAR,CAAY;AACR,aAAK,YAAL;AACA,YAAG;AACC,qBAAQ,MAAR;AACA,mBAAO,MAAM,QAAN,GAAiB,GAAjB;SAFX;KAFJ,EAMG,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAwB;;;AAGvB,YAAI,eAAe,EAAf,CAHmB;;AAKvB,YAAI,UAAU,KAAK,KAAL,CAAW,IAAX,CAAV,CALmB;AAMvB,YAAI,UAAU,QAAQ,CAAR,CAAU,OAAV;;;AANS,aASnB,IAAI,IAAI,CAAJ,EAAO,IAAI,QAAQ,MAAR,EAAe,GAAlC,EAAsC;AAClC,gBAAI,SAAS,QAAQ,CAAR,CAAT,CAD8B;AAElC,yBAAa,IAAb,CACI;AACI,uBAAO,OAAO,KAAP;AACP,qBAAK,OAAO,GAAP;AACL,sBAAM,OAAO,WAAP;AACN,sBAAM,OAAO,IAAP;aALd,EAFkC;SAAtC;;;AATuB,gBAsBvB,CAAS,YAAT,EAtBuB;KAAxB,CANH,CAHJ;CADA","file":"newsAPI-compiled.js","sourcesContent":["/**\n * Created by Joey on 2/17/16.\n * Handles all requests to the BingAPI\n */\n//require('dotenv').config();\nvar apiKey = process.env.BING_KEY;\nvar rootUri = 'https://api.datamarket.azure.com/Bing/Search';\nvar auth = new Buffer([ apiKey, apiKey ].join(':')).toString('base64');\nvar request = require('request').defaults({\n    headers:{\n        'Authorization' : 'Basic ' + auth\n    }\n});\n//var Bing = require('node-bing-api')({accKey: apiKey});\n\n//Usable by requiring the module\nmodule.exports = {\n    getGameNews: function(gameName, callback) {\n        getGameNews(gameName, callback);\n    },\n    getGameMedia: function(gameName, mediaDataHandler)\n    {\n        getGameMedia(gameName, mediaDataHandler);\n    }\n\n};\n\n//Requests media data from the Bing web API\nfunction getGameMedia(gameName, mediaDataHandler)\n{\n    //We want video results\n    var searchString = rootUri + '/Video';\n\n    //Configure options and make request\n    request.get({\n        uri: searchString,\n        qs:{\n            $format:'json',\n            Query: \"'\" + gameName + \"'\"\n        }\n    }, function(err, res, body)\n    {\n        //Init our results array we will send to callback\n        var resultsArray = [];\n        var jsonRes = JSON.parse(body);\n        var results = jsonRes.d.results;\n\n        //For each result from the BingAPI, format our callback response object\n        for(var i = 0; i < results.length; i++)\n        {\n            var curRes = results[i];\n            resultsArray.push({\n                title: curRes.Title,\n                url: curRes.MediaUrl,\n                thumbnail: curRes.Thumbnail\n            });\n        }\n\n        //callback\n        mediaDataHandler(resultsArray);\n    });\n}\n\n//Request news articles from the BingAPI\nfunction getGameNews(gameName, callback)\n{\n    //We want news\n    var searchString = rootUri + '/News';\n    request.get({\n        uri: searchString,\n        qs:{\n            $format:'json',\n            Query: \"'\" + gameName + \"'\"\n        }\n    }, function(err, res, body){\n\n        //Init the callback response array\n        var resultsArray = [];\n\n        var jsonRes = JSON.parse(body);\n        var results = jsonRes.d.results;\n\n        //Process each result into something usable for us\n        for(var i = 0; i < results.length;i++){\n            var curRes = results[i];\n            resultsArray.push(\n                {\n                    title: curRes.Title,\n                    url: curRes.Url,\n                    desc: curRes.Description,\n                    date: curRes.Date\n                }\n            );\n        }\n\n        //Pass to callback\n        callback(resultsArray);\n    });\n}\n\n\n"]}