{"version":3,"sources":["httpRequestService.js"],"names":[],"mappings":"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","file":"httpRequestService-compiled.js","sourcesContent":["/**\n * Created by Joey on 3/21/16.\n */\nrequire('./dataManagerService.js');\nvar app = angular.module('upcomingGames');\napp.factory('httpReqService', function($http, $sce){\n    return{\n        searchForArticles: function(gameName, articleDataHandler)\n        {\n            //set up our options, we send the server the game name\n            var options = {\n                params:{\n                    gameName: gameName\n                }\n            };\n\n            //Make the request, and assign the result to the newsArticles scope param\n            //So that the view is updated\n            $http.get('/info/getArticles', options).then(function(resp){\n                articleDataHandler(resp.data);\n            });\n        },\n\n        searchForMedia: function(gameName, mediaDataHandler)\n        {\n            var options = {\n                params:{\n                    gameName: gameName\n                }\n            };\n            //Make the request\n            $http.get('/info/gameMedia', options).then(function(resp){\n                //Filter out the video id to use it for the thumbnail\n                var mediaDatas = [];\n\n                for(var i = 0; i < resp.data.length; i++) {\n                    var respItem = resp.data[i];\n                    var urlSplit = respItem.url.split('/');\n\n                    //If this is a youtube video\n                    if(urlSplit[2].indexOf('youtube.com') > -1) {\n                        var QueryItems = function () {\n                            var query_string = {};\n                            var query = respItem.url;\n                            var vars = query.split(\"?\");\n                            for (var i = 0; i < vars.length; i++) {\n                                var pair = vars[i].split(\"=\");\n                                // If first entry with this name\n                                if (typeof query_string[pair[0]] === \"undefined\") {\n                                    query_string[pair[0]] = decodeURIComponent(pair[1]);\n                                    // If second entry with this name\n                                } else if (typeof query_string[pair[0]] === \"string\") {\n                                    var arr = [query_string[pair[0]], decodeURIComponent(pair[1])];\n                                    query_string[pair[0]] = arr;\n                                    // If third or later entry with this name\n                                } else {\n                                    query_string[pair[0]].push(decodeURIComponent(pair[1]));\n                                }\n                            }\n                            return query_string;\n                        }();\n\n                        //Get the v parameter which is the youtube video id\n                        var vidId = QueryItems.v;\n\n                        //Set up a custom object with the data and add it to the returned JSON array\n                        var mediaData = {\n                            url: respItem.url,\n                            title: respItem.title,\n                            imgsrc: \"https://img.youtube.com/vi/\" + vidId + \"/1.jpg\"\n                        };\n                        mediaDatas.push(mediaData);\n                    }\n\n                }\n                for(var i=0; i< mediaDatas.length; i++)\n                {\n                    $sce.trustAsResourceUrl(mediaDatas[i].url.replace(\"watch?v=\", \"embed/\"));\n                }\n                //TODO: Other media platforms besides youtube\n                mediaDataHandler(mediaDatas);\n            });\n        },\n\n        searchForGames: function(searchTerms, searchDataHandler)\n        {\n            var searchInValue = encodeURIComponent(searchTerms);\n\n            //Get our promise, make the request\n            var httppromise = $http.get('/info/searchgames', {\n                params:{\n                    //Additional data here ie->\n                    searchTerm: searchInValue\n                }\n            });\n\n            //When we come back assign the result to the scope parameter for results\n            httppromise.then(function(res){\n\n                if(res.data.length > 0)\n                    searchDataHandler(res.data);\n                else {\n                    //If no results send empty instead of null\n                    searchDataHandler([]);\n                }\n            });\n        },\n        addTrackedGamePost: function(gameId, onSuccessHandler)\n        {\n            $http.post('/userdata/addTrackedGame', {\n                gameid: gameId\n            }).success(function(){\n                onSuccessHandler();\n            });\n        },\n        removeTrackedGamePost: function (gameId, onSuccessHandler)\n        {\n            $http.post('/userData/removeTrackedGame',{\n                gameid: gameId\n            }).success(function(){\n                onSuccessHandler();\n            });\n        },\n        getTrackedGames: function(trackedGamesHanlder)\n        {\n            $http.get('/userdata/userTrackedGames').then(function(resp){\n                trackedGamesHanlder(resp.data);\n            });\n        },\n        getFriendsTrackedGames: function(friendsTrackedGamesHandler)\n        {\n            $http.get('/userdata/getfriendstrackedgames').then(function(resp)\n            {\n               friendsTrackedGamesHandler(resp.data);\n            });\n        },\n        getTopTrackedGames: function(topTrackedHanler)\n        {\n            $http.get('/info/toptracked').then(function(resp)\n            {\n                topTrackedHanler(resp.data);\n            });\n        }\n    }\n});"]}