!function(e){function n(s){if(t[s])return t[s].exports;var a=t[s]={exports:{},id:s,loaded:!1};return e[s].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function s(e,n){a(e,c),n.getTrackedGames(function(n){e.trackedGames=n.sort(function(e,n){return i(e.name,n.name)}),angular.element("#loadingListIcon").remove(),a(e,c)})}function a(e,n){var t=document.getElementsByName("removeGameButton");if(n){for(var s=0;s<t.length;s++)t[s].style.display="inline-block";e.remToggleText="Done"}else{for(var a=0;a<t.length;a++)t[a].style.display="none";e.remToggleText="Remove Games"}}function r(e){c?(c=!1,e.remToggle=c):(c=!0,e.remToggle=c),e.remStyle=c?"display: inline-block":"display: none"}function o(){angular.element("#searchGamesButton").dropdown("toggle")}function i(e,n){return e=e.toLowerCase(),n=n.toLowerCase(),n>e?-1:e>n?1:0}var u=angular.module("upcomingGames",[]);t(1);var c=!1;u.config(function(e,n){e.startSymbol("{[{"),e.endSymbol("}]}"),n.resourceUrlWhitelist(["self","https://www.youtube.com/**"])}),u.controller("mainCtrl",function(e,n,t,a,u){angular.element(document).ready(function(){$('#news-table a[href="#1"]').tab("show")}),a.allFriends=!1,a.loadingNews=!1,a.loadingMedia=!1,a.trackedGames=[],a.friends=[],a.remToggle=c,a.remStyle="display: none",s(a,e),a.toggleRes=function(){o()},a.searchGames=function(){var n=document.getElementById("noResultsIndicator");n.style.display="none";var t=document.getElementById("searchGamesIn").value.trim(),s=document.getElementById("searchingIndicator");s.style.display="inline-block",e.searchForGames(t,function(e){if(s.style.display="none",e.length<=0){var n=document.getElementById("noResultsIndicator");n.style.display="inline-block"}else a.searchResults=e})},a.getGameInfo=function(n,t){a.selectedTrackedGameIndex=n,a.newsArticles=[],a.mediaItems=[],a.loadingMedia=!0,a.loadingNews=!0,e.searchForArticles(t.name,function(e){a.loadingNews=!1,a.newsArticles=e,a.$apply()}),e.searchForMedia(t.name,function(e){a.loadingMedia=!1,a.mediaItems=e,a.$apply()})},a.addTrackedGame=function(n){e.addTrackedGamePost(n.gbGameId,function(){s(a,e)})},a.removeTrackedGame=function(n){a.trackedGames=_.without(a.trackedGames,n).sort(function(e,n){return i(e.name,n.name)}),e.removeTrackedGamePost(n.gbGameId,function(){s(a,e)})},a.toggleRemGames=function(){r(a)},a.getTTR=function(e,n,t){return getTTR(e,n,t)},t(function(){for(var e=0;e<a.trackedGames.length;e++){var t=a.trackedGames[e];a.trackedGames[e].ttr=n.getTimeToRelease(t.releaseMonth,t.releaseDay,t.releaseYear)}},1e3),e.getFriendsTrackedGames(function(e){for(var n=e,t=0;t<n.length;t++)n[t].gameData&&(n[t].gameData=n[t].gameData.sort(function(e,n){return i(e.name,n.name)}));a.friends=n.sort(function(e,n){return i(e.userid,n.userid)})}),e.getTopTrackedGames(function(e){a.topGames=e})})},function(e,n,t){t(2);var s=angular.module("upcomingGames");s.factory("httpReqService",function(e,n){return{searchForArticles:function(n,t){var s={params:{gameName:n}};e.get("/info/getArticles",s).then(function(e){t(e.data)})},searchForMedia:function(t,s){var a={params:{gameName:t}};e.get("/info/gameMedia",a).then(function(e){for(var t=[],a=0;a<e.data.length;a++){var r=e.data[a],o=r.url.split("/");if(o[2].indexOf("youtube.com")>-1){var i=function(){for(var e={},n=r.url,t=n.split("?"),s=0;s<t.length;s++){var a=t[s].split("=");if("undefined"==typeof e[a[0]])e[a[0]]=decodeURIComponent(a[1]);else if("string"==typeof e[a[0]]){var o=[e[a[0]],decodeURIComponent(a[1])];e[a[0]]=o}else e[a[0]].push(decodeURIComponent(a[1]))}return e}(),u=i.v,c={url:r.url,title:r.title,imgsrc:"https://img.youtube.com/vi/"+u+"/1.jpg"};t.push(c)}}for(var a=0;a<t.length;a++)n.trustAsResourceUrl(t[a].url.replace("watch?v=","embed/"));s(t)})},searchForGames:function(n,t){var s=encodeURIComponent(n),a=e.get("/info/searchgames",{params:{searchTerm:s}});a.then(function(e){t(e.data.length>0?e.data:[])})},addTrackedGamePost:function(n,t){e.post("/userdata/addTrackedGame",{gameid:n}).success(function(){t()})},removeTrackedGamePost:function(n,t){e.post("/userData/removeTrackedGame",{gameid:n}).success(function(){t()})},getTrackedGames:function(n){e.get("/userdata/userTrackedGames").then(function(e){n(e.data)})},getFriendsTrackedGames:function(n){e.get("/info/getfriendstrackedgames").then(function(e){n(e.data)})},getTopTrackedGames:function(n){e.get("/userdata/toptracked").then(function(e){n(e.data)})}}})},function(e,n,t){t(3);var s=angular.module("upcomingGames");s.factory("dataService",function(){return{getTimeToRelease:function(e,n,t){var s=countdown(new Date(t,e,n));return{sec:s.seconds,min:s.minutes,hrs:s.hours,yrs:s.years,days:s.days,mons:s.months-1}}}})},function(e,n){var e;(function(e){function n(e,n){var t=e.getTime();return e.setMonth(e.getMonth()+n),Math.round((e.getTime()-t)/864e5)}function t(e){var n=e.getTime(),t=new Date(n);return t.setMonth(e.getMonth()+1),Math.round((t.getTime()-n)/864e5)}function s(e,n){if(n=n instanceof Date||null!==n&&isFinite(n)?new Date(+n):new Date,!e)return n;var t=+e.value||0;return t?(n.setTime(n.getTime()+t),n):((t=+e.milliseconds||0)&&n.setMilliseconds(n.getMilliseconds()+t),(t=+e.seconds||0)&&n.setSeconds(n.getSeconds()+t),(t=+e.minutes||0)&&n.setMinutes(n.getMinutes()+t),(t=+e.hours||0)&&n.setHours(n.getHours()+t),(t=+e.weeks||0)&&(t*=7),(t+=+e.days||0)&&n.setDate(n.getDate()+t),(t=+e.months||0)&&n.setMonth(n.getMonth()+t),(t=+e.millennia||0)&&(t*=10),(t+=+e.centuries||0)&&(t*=10),(t+=+e.decades||0)&&(t*=10),(t+=+e.years||0)&&n.setFullYear(n.getFullYear()+t),n)}function a(e,n){return g(e)+(1===e?c[n]:d[n])}function r(){}function o(e,n,s,a,r,o){if(0<=e[s]&&(n+=e[s],delete e[s]),n/=r,1>=n+1)return 0;if(0<=e[a]){switch(e[a]=+(e[a]+n).toFixed(o),a){case"seconds":if(60!==e.seconds||isNaN(e.minutes))break;e.minutes++,e.seconds=0;case"minutes":if(60!==e.minutes||isNaN(e.hours))break;e.hours++,e.minutes=0;case"hours":if(24!==e.hours||isNaN(e.days))break;e.days++,e.hours=0;case"days":if(7!==e.days||isNaN(e.weeks))break;e.weeks++,e.days=0;case"weeks":if(e.weeks!==t(e.refMonth)/7||isNaN(e.months))break;e.months++,e.weeks=0;case"months":if(12!==e.months||isNaN(e.years))break;e.years++,e.months=0;case"years":if(10!==e.years||isNaN(e.decades))break;e.decades++,e.years=0;case"decades":if(10!==e.decades||isNaN(e.centuries))break;e.centuries++,e.decades=0;case"centuries":if(10!==e.centuries||isNaN(e.millennia))break;e.millennia++,e.centuries=0}return 0}return n}function i(e,s,a,r,i,u){var c=new Date;e.start=s=s||c,e.end=a=a||c,e.units=r,e.value=a.getTime()-s.getTime(),0>e.value&&(c=a,a=s,s=c),e.refMonth=new Date(s.getFullYear(),s.getMonth(),15,12,0,0);try{e.millennia=0,e.centuries=0,e.decades=0,e.years=a.getFullYear()-s.getFullYear(),e.months=a.getMonth()-s.getMonth(),e.weeks=0,e.days=a.getDate()-s.getDate(),e.hours=a.getHours()-s.getHours(),e.minutes=a.getMinutes()-s.getMinutes(),e.seconds=a.getSeconds()-s.getSeconds(),e.milliseconds=a.getMilliseconds()-s.getMilliseconds();var d;for(0>e.milliseconds?(d=p(-e.milliseconds/1e3),e.seconds-=d,e.milliseconds+=1e3*d):1e3<=e.milliseconds&&(e.seconds+=v(e.milliseconds/1e3),e.milliseconds%=1e3),0>e.seconds?(d=p(-e.seconds/60),e.minutes-=d,e.seconds+=60*d):60<=e.seconds&&(e.minutes+=v(e.seconds/60),e.seconds%=60),0>e.minutes?(d=p(-e.minutes/60),e.hours-=d,e.minutes+=60*d):60<=e.minutes&&(e.hours+=v(e.minutes/60),e.minutes%=60),0>e.hours?(d=p(-e.hours/24),e.days-=d,e.hours+=24*d):24<=e.hours&&(e.days+=v(e.hours/24),e.hours%=24);0>e.days;)e.months--,e.days+=n(e.refMonth,1);if(7<=e.days&&(e.weeks+=v(e.days/7),e.days%=7),0>e.months?(d=p(-e.months/12),e.years-=d,e.months+=12*d):12<=e.months&&(e.years+=v(e.months/12),e.months%=12),10<=e.years&&(e.decades+=v(e.years/10),e.years%=10,10<=e.decades&&(e.centuries+=v(e.decades/10),e.decades%=10,10<=e.centuries&&(e.millennia+=v(e.centuries/10),e.centuries%=10))),s=0,!(1024&r)||s>=i?(e.centuries+=10*e.millennia,delete e.millennia):e.millennia&&s++,!(512&r)||s>=i?(e.decades+=10*e.centuries,delete e.centuries):e.centuries&&s++,!(256&r)||s>=i?(e.years+=10*e.decades,delete e.decades):e.decades&&s++,!(128&r)||s>=i?(e.months+=12*e.years,delete e.years):e.years&&s++,!(64&r)||s>=i?(e.months&&(e.days+=n(e.refMonth,e.months)),delete e.months,7<=e.days&&(e.weeks+=v(e.days/7),e.days%=7)):e.months&&s++,!(32&r)||s>=i?(e.days+=7*e.weeks,delete e.weeks):e.weeks&&s++,!(16&r)||s>=i?(e.hours+=24*e.days,delete e.days):e.days&&s++,!(8&r)||s>=i?(e.minutes+=60*e.hours,delete e.hours):e.hours&&s++,!(4&r)||s>=i?(e.seconds+=60*e.minutes,delete e.minutes):e.minutes&&s++,!(2&r)||s>=i?(e.milliseconds+=1e3*e.seconds,delete e.seconds):e.seconds&&s++,!(1&r)||s>=i){var l=o(e,0,"milliseconds","seconds",1e3,u);if(l&&(l=o(e,l,"seconds","minutes",60,u))&&(l=o(e,l,"minutes","hours",60,u))&&(l=o(e,l,"hours","days",24,u))&&(l=o(e,l,"days","weeks",7,u))&&(l=o(e,l,"weeks","months",t(e.refMonth)/7,u))){r=l;var m,f=e.refMonth,h=f.getTime(),g=new Date(h);if(g.setFullYear(f.getFullYear()+1),m=Math.round((g.getTime()-h)/864e5),(l=o(e,r,"months","years",m/t(e.refMonth),u))&&(l=o(e,l,"years","decades",10,u))&&(l=o(e,l,"decades","centuries",10,u))&&(l=o(e,l,"centuries","millennia",10,u)))throw Error("Fractional unit overflow")}}}finally{delete e.refMonth}return e}function u(e,n,t,a,o){var u;t=+t||222,a=a>0?a:NaN,o=o>0?20>o?Math.round(o):20:0;var c=null;"function"==typeof e?(u=e,e=null):e instanceof Date||(null!==e&&isFinite(e)?e=new Date(+e):("object"==typeof c&&(c=e),e=null));var d=null;if("function"==typeof n?(u=n,n=null):n instanceof Date||(null!==n&&isFinite(n)?n=new Date(+n):("object"==typeof n&&(d=n),n=null)),c&&(e=s(c,n)),d&&(n=s(d,e)),!e&&!n)return new r;if(!u)return i(new r,e,n,t,a,o);var l,c=1&t?1e3/30:2&t?1e3:4&t?6e4:8&t?36e5:16&t?864e5:6048e5,d=function(){u(i(new r,e,n,t,a,o),l)};return d(),l=setInterval(d,c)}var c,d,l,m,f,h,g,y,p=Math.ceil,v=Math.floor;r.prototype.toString=function(e){var n=y(this),t=n.length;return t?1===t?n[0]:(e=l+n.pop(),n.join(m)+e):e?""+e:f},r.prototype.toHTML=function(e,n){e=e||"span";var t=y(this),s=t.length;if(!s)return(n=n||f)?"<"+e+">"+n+"</"+e+">":n;for(var a=0;s>a;a++)t[a]="<"+e+">"+t[a]+"</"+e+">";return 1===s?t[0]:(s=l+t.pop(),t.join(m)+s)},r.prototype.addTo=function(e){return s(this,e)},y=function(e){var n=[],t=e.millennia;return t&&n.push(h(t,10)),(t=e.centuries)&&n.push(h(t,9)),(t=e.decades)&&n.push(h(t,8)),(t=e.years)&&n.push(h(t,7)),(t=e.months)&&n.push(h(t,6)),(t=e.weeks)&&n.push(h(t,5)),(t=e.days)&&n.push(h(t,4)),(t=e.hours)&&n.push(h(t,3)),(t=e.minutes)&&n.push(h(t,2)),(t=e.seconds)&&n.push(h(t,1)),(t=e.milliseconds)&&n.push(h(t,0)),n},u.MILLISECONDS=1,u.SECONDS=2,u.MINUTES=4,u.HOURS=8,u.DAYS=16,u.WEEKS=32,u.MONTHS=64,u.YEARS=128,u.DECADES=256,u.CENTURIES=512,u.MILLENNIA=1024,u.DEFAULTS=222,u.ALL=2047;var k=u.setFormat=function(e){if(e){if("singular"in e||"plural"in e){var n=e.singular||[];n.split&&(n=n.split("|"));var t=e.plural||[];t.split&&(t=t.split("|"));for(var s=0;10>=s;s++)c[s]=n[s]||c[s],d[s]=t[s]||d[s]}"string"==typeof e.last&&(l=e.last),"string"==typeof e.delim&&(m=e.delim),"string"==typeof e.empty&&(f=e.empty),"function"==typeof e.formatNumber&&(g=e.formatNumber),"function"==typeof e.formatter&&(h=e.formatter)}},w=u.resetFormat=function(){c=" millisecond; second; minute; hour; day; week; month; year; decade; century; millennium".split(";"),d=" milliseconds; seconds; minutes; hours; days; weeks; months; years; decades; centuries; millennia".split(";"),l=" and ",m=", ",f="",g=function(e){return e},h=a};return u.setLabels=function(e,n,t,s,a,r,o){k({singular:e,plural:n,last:t,delim:s,empty:a,formatNumber:r,formatter:o})},u.resetLabels=w,w(),e&&e.exports?e.exports=u:"function"==typeof window.define&&"undefined"!=typeof window.define.amd&&window.define("countdown",[],function(){return u}),u})(e)}]);